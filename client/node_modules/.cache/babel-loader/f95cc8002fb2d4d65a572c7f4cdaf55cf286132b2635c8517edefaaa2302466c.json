{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./BlogsForm.css\";import{Link,useNavigate}from\"react-router-dom\";import api from\"../axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CategoryForm=()=>{const navigate=useNavigate();const[categoryname,setCategoryName]=useState(\"\");const[categoryimage,setCategoryImage]=useState(\"\");const[photourl,setPhotourl]=useState(\"\");useEffect(()=>{if(categoryimage){Upload(categoryimage);}},[categoryimage]);const Upload=image=>{if(!image){alert(\"Please select a photo\");return;}const data=new FormData();data.append(\"file\",categoryimage);data.append(\"upload_preset\",\"bloggs\");data.append(\"cloud_name\",\"dnrels1zh\");fetch(\"https://api.cloudinary.com/v1_1/dnrels1zh/image/upload\",{method:\"POST\",body:data}).then(res=>res.json()).then(data=>{if(data.url){setPhotourl(data.url);localStorage.setItem(\"image\",data.url);alert(\"Photo uploaded successfully\");}else{alert(\"Failed to upload photo\");}}).catch(err=>{console.error(\"Upload error:\",err);alert(\"Error uploading photo\");});};const handleSubmit=async e=>{e.preventDefault();if(!categoryname||!photourl){alert(\"All fields are required\");return;}alert(\"Submitting Blog...\");try{const formData={categoryname,categoryimage:photourl};const response=await api.post(\"/addcategory\",formData,{headers:{\"Content-Type\":\"application/json\"}});if(response.status===201){alert(\"category posted successfully\");setCategoryName(\"\");setCategoryImage(\"\");navigate(\"/dashboard/subcategory\");}}catch(error){console.error(\"Error submitting blog:\",error);alert(\"Failed to submit blog\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"blog-container container mt-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center m-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/getcategory\",children:\"Get Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card px-4 py-3 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-3\",children:\"Add a category Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Category Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter category title\",value:categoryname,onChange:e=>setCategoryName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Image \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",onChange:e=>setCategoryImage(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",children:\"Publish Category\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mt-3 d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://www.shankara.in/cdn/shop/articles/13_Skincare_Tips_for_Dry_Skin___From_Cleansing_to_Moisturizing.jpg?v=1726823781&width=2048\",alt:\"Blog\",className:\"blog-image img-fluid rounded shadow\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pinimg.com/736x/c3/bd/24/c3bd2475cc1c3fa981550cfd34dcbbba.jpg\",alt:\"Blog\",className:\"blog-image img-fluid rounded shadow mt-4 d-none d-md-block\"})]})]})})});};export default CategoryForm;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CategoryForm","navigate","categoryname","setCategoryName","categoryimage","setCategoryImage","photourl","setPhotourl","Upload","image","alert","data","FormData","append","fetch","method","body","then","res","json","url","localStorage","setItem","catch","err","console","error","handleSubmit","e","preventDefault","formData","response","post","headers","status","children","className","to","onSubmit","type","placeholder","value","onChange","target","required","files","src","alt"],"sources":["C:/Users/Allied/Desktop/Serviceproject/client/src/Admin/Categoryform.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./BlogsForm.css\";\r\nimport { Link,  useNavigate } from \"react-router-dom\";\r\nimport api from \"../axios\";\r\n\r\nconst CategoryForm = () => {\r\n  const navigate=useNavigate()\r\n  const [categoryname, setCategoryName] = useState(\"\");\r\n  const [categoryimage ,setCategoryImage] = useState(\"\");\r\n  const [photourl, setPhotourl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (categoryimage) {\r\n      Upload(categoryimage);\r\n    }\r\n  }, [categoryimage]);\r\n\r\n  const Upload = (image) => {\r\n    if (!image) {\r\n      alert(\"Please select a photo\");\r\n      return;\r\n    }\r\n\r\n    const data = new FormData();\r\n    data.append(\"file\", categoryimage);\r\n    data.append(\"upload_preset\", \"bloggs\");\r\n    data.append(\"cloud_name\", \"dnrels1zh\");\r\n\r\n    fetch(\"https://api.cloudinary.com/v1_1/dnrels1zh/image/upload\", {\r\n      method: \"POST\",\r\n      body: data,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.url) {\r\n          setPhotourl(data.url);\r\n          localStorage.setItem(\"image\", data.url);\r\n          alert(\"Photo uploaded successfully\");\r\n        } else {\r\n          alert(\"Failed to upload photo\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Upload error:\", err);\r\n        alert(\"Error uploading photo\");\r\n      });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!categoryname ||  !photourl) {\r\n      alert(\"All fields are required\");\r\n      return;\r\n    }\r\n\r\n    alert(\"Submitting Blog...\");\r\n\r\n    try {\r\n      const formData = { categoryname, categoryimage: photourl };\r\n\r\n      const response = await api.post(\"/addcategory\", formData, {\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n\r\n      if (response.status === 201) {\r\n        alert(\"category posted successfully\");\r\n        \r\n        setCategoryName(\"\");\r\n        setCategoryImage(\"\");\r\n        navigate(\"/dashboard/subcategory\")\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error submitting blog:\", error);\r\n      alert(\"Failed to submit blog\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      \r\n      <div className=\"blog-container container mt-4 mb-4\">\r\n        <div className=\"row justify-content-center m-4\">\r\n          <Link to=\"/getcategory\">Get Category</Link>\r\n          {/* Blog Form */}\r\n          <div className=\"col-md-8 col-lg-6\">\r\n            <div className=\"card px-4 py-3 shadow-sm\">\r\n              <h2 className=\"text-center mb-3\">Add a category Post</h2>\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Category Title</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Enter category title\"\r\n                    value={categoryname}\r\n                    onChange={(e) => setCategoryName(e.target.value)}\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Image </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    className=\"form-control\"\r\n                    onChange={(e) => setCategoryImage(e.target.files[0])}\r\n                  />\r\n                </div>\r\n\r\n\r\n                <button type=\"submit\" className=\"btn btn-primary w-100\">\r\n                  Publish Category\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Blog Images */}\r\n          <div className=\"col-md-6 mt-3 d-flex flex-column align-items-center\">\r\n            <img\r\n              src=\"https://www.shankara.in/cdn/shop/articles/13_Skincare_Tips_for_Dry_Skin___From_Cleansing_to_Moisturizing.jpg?v=1726823781&width=2048\"\r\n              alt=\"Blog\"\r\n              className=\"blog-image img-fluid rounded shadow\"\r\n            />\r\n            <img\r\n              src=\"https://i.pinimg.com/736x/c3/bd/24/c3bd2475cc1c3fa981550cfd34dcbbba.jpg\"\r\n              alt=\"Blog\"\r\n              className=\"blog-image img-fluid rounded shadow mt-4 d-none d-md-block\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CategoryForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}