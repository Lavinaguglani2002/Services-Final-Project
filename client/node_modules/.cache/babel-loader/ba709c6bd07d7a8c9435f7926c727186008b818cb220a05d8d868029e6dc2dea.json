{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// const UserOrders = ({ userEmail }) => {\n//   const [orders, setOrders] = useState([]);\n//   const [message, setMessage] = useState(\"\");\n//   useEffect(() => {\n//     if (userEmail) {\n//       fetchOrdersByEmail(userEmail);\n//     }\n//   }, [userEmail]);\n//   const fetchOrdersByEmail = async (email) => {\n//     try {\n//       const res = await fetch(`http://localhost:8000/getuserorders/${email}`);\n//       const data = await res.json();\n//       setOrders(data.orders || []);\n//     } catch (err) {\n//       console.error(\"User order fetch error:\", err);\n//       setMessage(\"Failed to load orders.\");\n//     }\n//   };\n//   return (\n//     <div className=\"container mt-5\">\n//       <h2 className=\"text-center mb-4 fw-bold\">My Orders</h2>\n//       {message && <div className=\"alert alert-danger text-center\">{message}</div>}\n//       {orders.length === 0 ? (\n//         <p className=\"text-center\">No orders found.</p>\n//       ) : (\n//         <div className=\"row\">\n//           {orders.map((order, index) => (\n//             <div key={index} className=\"col-md-6 col-lg-4 mb-4\">\n//               <div className=\"card border-0 shadow h-100\">\n//                 <div className=\"card-body\">\n//                   <h5 className=\"card-title mb-3 text-primary\">\n// Order {index+1} - {order.serviceName}\n//                   </h5>\n//                   <ul className=\"list-unstyled\">\n//                     <li>\n//                       <strong>Date:</strong>{\" \"}\n//                       {new Date(order.serviceDate).toLocaleDateString()}\n//                     </li>\n//                     <li>\n//                       <strong>Amount:</strong> ‚Çπ{order.totalAmount}\n//                     </li>\n//                     <li>\n//                       <strong>Status:</strong>{\" \"}\n//                       <span\n//                         className={`badge px-3 py-2 ${\n//                           order.deliveryStatus === \"Approved\"\n//                             ? \"bg-success\"\n//                             : order.deliveryStatus === \"Rejected\"\n//                             ? \"bg-danger\"\n//                             : \"bg-warning text-dark\"\n//                         }`}\n//                       >\n//                         {order.deliveryStatus}\n//                       </span>\n//                     </li>\n//                     <ul className=\"order-items mt-2\">\n//                         {order.cartItems.map((item, idx) => (\n//                             <li key={idx} className=\"mb-1\">\n//                             <strong>{item.name}</strong> - ‚Çπ{item.price} x {item.quantity}\n//                           </li>\n//                         ))}\n//                     </ul>\n//                   </ul>\n//                 </div>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n// export default UserOrders;\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import api from\"../axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MyOrders=()=>{const[orders,setOrders]=useState([]);const userId=localStorage.getItem(\"userId\");useEffect(()=>{const fetchOrders=async()=>{try{console.log(\"üì§ Fetching orders for userId:\",userId);const res=await api.get(`/getuserorders/${userId}`);console.log(\"‚úÖ Orders received:\",res.data.orders);setOrders(res.data.orders);}catch(error){console.error(\"‚ùå Error fetching orders:\",error);}};if(userId){fetchOrders();}},[userId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"My Orders\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders found.\"}):/*#__PURE__*/_jsx(\"ul\",{children:orders.map(order=>{var _order$cartItems;return/*#__PURE__*/_jsxs(\"li\",{className:\"mb-4 border p-4 rounded-lg shadow\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",order.deliveryStatus]}),order.deliveryStatus===\"Shipped\"&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-success\",children:[\"\\uD83D\\uDCE6 Delivery Date:\",order.deliveryDate&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"-Delivery Date \",new Date(order.deliveryDate).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery Type:\"}),\" \",order.deliveryType]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 font-semibold\",children:\"Items:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"ml-4 list-disc\",children:(_order$cartItems=order.cartItems)===null||_order$cartItems===void 0?void 0:_order$cartItems.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2 flex items-center gap-4\",children:[item.image&&/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,style:{width:\"26px\",height:\"30px\",objectFit:\"cover\",borderRadius:\"4px\"}}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Qty: \",item.quantity,\" \\xD7 \\u20B9\",(item.price/item.quantity).toFixed(2),\" = \\u20B9\",item.price]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total Amount:\",order.totalAmount]})]},idx))})]},order._id);})})]});};export default MyOrders;","map":{"version":3,"names":["React","useEffect","useState","axios","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyOrders","orders","setOrders","userId","localStorage","getItem","fetchOrders","console","log","res","get","data","error","className","children","length","map","order","_order$cartItems","deliveryStatus","deliveryDate","Date","toLocaleDateString","deliveryType","cartItems","item","idx","image","src","alt","name","style","width","height","objectFit","borderRadius","quantity","price","toFixed","totalAmount","_id"],"sources":["C:/Users/Allied/Desktop/Serviceproject/client/src/components/Userorder.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n\r\n// const UserOrders = ({ userEmail }) => {\r\n//   const [orders, setOrders] = useState([]);\r\n//   const [message, setMessage] = useState(\"\");\r\n\r\n//   useEffect(() => {\r\n//     if (userEmail) {\r\n//       fetchOrdersByEmail(userEmail);\r\n//     }\r\n//   }, [userEmail]);\r\n\r\n//   const fetchOrdersByEmail = async (email) => {\r\n//     try {\r\n//       const res = await fetch(`http://localhost:8000/getuserorders/${email}`);\r\n//       const data = await res.json();\r\n//       setOrders(data.orders || []);\r\n//     } catch (err) {\r\n//       console.error(\"User order fetch error:\", err);\r\n//       setMessage(\"Failed to load orders.\");\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"container mt-5\">\r\n//       <h2 className=\"text-center mb-4 fw-bold\">My Orders</h2>\r\n\r\n//       {message && <div className=\"alert alert-danger text-center\">{message}</div>}\r\n\r\n//       {orders.length === 0 ? (\r\n//         <p className=\"text-center\">No orders found.</p>\r\n//       ) : (\r\n//         <div className=\"row\">\r\n//           {orders.map((order, index) => (\r\n//             <div key={index} className=\"col-md-6 col-lg-4 mb-4\">\r\n//               <div className=\"card border-0 shadow h-100\">\r\n//                 <div className=\"card-body\">\r\n//                   <h5 className=\"card-title mb-3 text-primary\">\r\n// Order {index+1} - {order.serviceName}\r\n//                   </h5>\r\n//                   <ul className=\"list-unstyled\">\r\n//                     <li>\r\n//                       <strong>Date:</strong>{\" \"}\r\n//                       {new Date(order.serviceDate).toLocaleDateString()}\r\n//                     </li>\r\n//                     <li>\r\n//                       <strong>Amount:</strong> ‚Çπ{order.totalAmount}\r\n//                     </li>\r\n//                     <li>\r\n//                       <strong>Status:</strong>{\" \"}\r\n//                       <span\r\n//                         className={`badge px-3 py-2 ${\r\n//                           order.deliveryStatus === \"Approved\"\r\n//                             ? \"bg-success\"\r\n//                             : order.deliveryStatus === \"Rejected\"\r\n//                             ? \"bg-danger\"\r\n//                             : \"bg-warning text-dark\"\r\n//                         }`}\r\n//                       >\r\n//                         {order.deliveryStatus}\r\n//                       </span>\r\n//                     </li>\r\n//                     <ul className=\"order-items mt-2\">\r\n//                         {order.cartItems.map((item, idx) => (\r\n//                             <li key={idx} className=\"mb-1\">\r\n//                             <strong>{item.name}</strong> - ‚Çπ{item.price} x {item.quantity}\r\n//                           </li>\r\n//                         ))}\r\n//                     </ul>\r\n//                   </ul>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           ))}\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default UserOrders;\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport api from \"../axios\";\r\n\r\nconst MyOrders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const userId = localStorage.getItem(\"userId\");\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        console.log(\"üì§ Fetching orders for userId:\", userId);\r\n        const res = await api.get(`/getuserorders/${userId}`);\r\n        console.log(\"‚úÖ Orders received:\", res.data.orders);\r\n        setOrders(res.data.orders);\r\n      } catch (error) {\r\n        console.error(\"‚ùå Error fetching orders:\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      fetchOrders();\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-xl font-bold mb-4\">My Orders</h2>\r\n      {orders.length === 0 ? (\r\n        <p>No orders found.</p>\r\n      ) : (\r\n        <ul>\r\n\r\n{orders.map((order) => (\r\n  <li key={order._id} className=\"mb-4 border p-4 rounded-lg shadow\">\r\n    <p><strong>Status:</strong> {order.deliveryStatus}</p>\r\n    {order.deliveryStatus === \"Shipped\" &&  (\r\n  <p className=\"text-success\">\r\n    üì¶ Delivery Date:\r\n    {order.deliveryDate &&(\r\n      <>-Delivery Date {new Date(order.deliveryDate).toLocaleDateString()}</>\r\n  )}\r\n  </p>\r\n)}\r\n\r\n    <p><strong>Delivery Type:</strong> {order.deliveryType}</p>\r\n\r\n    <p className=\"mt-2 font-semibold\">Items:</p>\r\n    <ul className=\"ml-4 list-disc\">\r\n      {order.cartItems?.map((item, idx) => (\r\n        <li key={idx} className=\"mb-2 flex items-center gap-4\">\r\n\r\n{item.image && (\r\n  <img\r\n    src={item.image}\r\n    alt={item.name}\r\n    style={{ width: \"26px\", height: \"30px\", objectFit: \"cover\", borderRadius: \"4px\" }}\r\n  />\r\n)}\r\n\r\n\r\n<p className=\"card-text\">\r\n  Qty: {item.quantity} √ó ‚Çπ{(item.price / item.quantity).toFixed(2)} = ‚Çπ{item.price}\r\n</p>\r\n          \r\n          <div>Total Amount:{order.totalAmount}</div>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  </li>\r\n))}\r\n\r\n\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyOrders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}